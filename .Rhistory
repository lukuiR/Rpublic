c4<-lat[lat>48.233]#c(48.234,48.230,48.228)
c5<-lon[lon<16.363#c(16.360,16.366,16.365)
c3<-c("Zlotoryja, Grunwaldzka 21")
cff1<-data.frame(c3,c4,c5)
colnames(cff1)<-c("miasto","lat","lng")
leaflet(cff1) %>% addTiles() %>%
addMarkers(lng=cff1$lng, lat=cff1$lat, clusterOptions = markerClusterOptions(maxClusterRadius=2)
,label = cff1$miasto
)
c4<-lat[lat>48.233]#c(48.234,48.230,48.228)
c5<-lon[lon<16.363#c(16.360,16.366,16.365)
c3<-c("Zlotoryja, Grunwaldzka 21")
cff1<-data.frame(c3,c4,c5)
colnames(cff1)<-c("miasto","lat","lng")
leaflet(cff1) %>% addTiles() %>%
addMarkers(lng=cff1$lng, lat=cff1$lat, clusterOptions = markerClusterOptions(maxClusterRadius=2)
,label = cff1$miasto
)
c4<-lat[lat>48.233]#c(48.234,48.230,48.228)
c5<-lon[lon<16.363]#c(16.360,16.366,16.365)
c3<-c("Zlotoryja, Grunwaldzka 21")
cff1<-data.frame(c3,c4,c5)
colnames(cff1)<-c("miasto","lat","lng")
leaflet(cff1) %>% addTiles() %>%
addMarkers(lng=cff1$lng, lat=cff1$lat, clusterOptions = markerClusterOptions(maxClusterRadius=2)
,label = cff1$miasto
)
df[df$lat<16.36]
df[df$lat<16.360]
df[df$lat=16.360]
df[df$lat==16.360]
df[1]
df[df$lat==48.22798]
df[df[1==48.22798]
df[df[1]==48.22798]
df[df[1]==48.22798,]
c4<-lat[lat<48.233]#c(48.234,48.230,48.228)
c5<-lon[lon>16.363]#c(16.360,16.366,16.365)
c3<-c("Zlotoryja, Grunwaldzka 21")
greenLeafIcon <- makeIcon(
iconUrl = "http://leafletjs.com/examples/custom-icons/leaf-green.png",
iconWidth = 38, iconHeight = 95,
iconAnchorX = 22, iconAnchorY = 94,
shadowUrl = "http://leafletjs.com/examples/custom-icons/leaf-shadow.png",
shadowWidth = 50, shadowHeight = 64,
shadowAnchorX = 4, shadowAnchorY = 62
)
cff1<-data.frame(c4,c5)
colnames(cff1)<-c("lat","lng")
leaflet(cff1) %>% addTiles() %>%
addMarkers(lng=cff1$lng, lat=cff1$lat, clusterOptions = markerClusterOptions(maxClusterRadius=2)
) %>% addMarkers(lng=16.366791, lat=48.228759, icon = greenLeafIcon)
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = tb$Var2[tb$Var2=="IN"])%>%
add_trace(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = tb$Var2[tb$Var2=="OUT"])#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
add_trace(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = tb$Var2[tb$Var2=="OUT"])#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
add_trace(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")
%>%
add_trace(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
%>%
add_trace(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
add_trace(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
add_trace(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "blue")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "black")#%>%
tb
table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])
table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[1]
table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1]
table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]
cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2])
data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
colnames(tb)<-C("time","IN","OUT")
colnames(tb1)<-C("time","IN","OUT")
tb1[,1]
tb1[1,]
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,color = "red")
plot_ly(tb1,x=row.names(tb1),y=tb1$X2,color = "red")
plot_ly(tb1,x=row.names(tb1),y=tb1$X2,color = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X2,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,colors = "red")%>%
add_trace(tb1,x=row.names(tb1),y=tb1$X2,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X2,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X2,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,colors = "red")
plot_ly(tb1,x=row.names(tb1),y=tb1$X2,colors = "blue")
add_trace(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"]-tb$Freq[tb$Var2=="OUT"],typy="scatter")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,colors = "red")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,colors = "red")%>%
add_trace(tb1,x=row.names(tb1),y=tb1$X2,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1,colors = "red")%>%
add_trace(y=tb1$X2,colors = "blue")
plot_ly(tb1,x=row.names(tb1),y=tb1$X1, name = 'trace 0',colors = "red")%>%
add_trace(y=tb1$X2, name = 'trace 2',colors = "blue")
tb2=data.frame(row.names(tb1),tb1$X1,tb1$X2)
tb2
colnames(tb2)<-C("time","IN","OUT")
plot_ly(tb2,x=~row.names.tb1.,y=tb1.X1, name = 'trace 0')%>%
add_trace(y=tb1$X2, name = 'trace 2',colors = "blue")
plot_ly(tb2,x=~row.names.tb1.,y=~tb1.X1, name = 'trace 0')
plot_ly(tb2,x=~row.names.tb1.,y=~tb1.X2, name = 'trace 0')
plot_ly(tb2,x=~row.names.tb1.,y=~tb1.X1, name = 'trace 0')%>%
plot_ly(tb2,x=~row.names.tb1.,y=~tb1.X2, name = 'trace 2')
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2))
tb2[1,]
plot_ly(tb2,x=~X1,y=~X2 name = 'trace 0')
plot_ly(tb2,x=~X1,y=~X2, name = 'trace 0')
plot_ly(tb2,x=~X1,y=~X2, name = 'trace 0',mode = 'lines')
plot_ly(tb2,x=~X1,y=~X2, name = 'trace 0')%>%
plot_ly(tb2,x=~X1,y=~X3, name = 'trace 2')
tb2<-transform(tb2, X2 = as.factor(X2))
tb2<-transform(tb2, X1 = as.factor(X1))
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0')%>%
plot_ly(tb2, x=~X1,y=~X3, name = 'trace 2')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0')%>%
add_trace(tb2, x=~X1,y=~X3, name = 'trace 2')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0')
tb2<-transform(tb2, X2 = as.factor(X2))
tb2<-transform(tb2, X1 = as.POSIXct(X1))
tb2<-transform(tb2, X3 = as.factor(X3))
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0')
%>%
add_trace(tb2, x=~X1,y=~X3, name = 'trace 2')
View(tb2)
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0')
tb2<-transform(tb2, X2 = as.numeric(X2))
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'lines')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'lines')%>%
add_trace(y=~X3, name = 'trace 2')
tb2<-transform(tb2, X3 = as.numeric(X3))
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'lines')%>%
add_trace(y=~X3, name = 'trace 2')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'lines')%>%
add_trace(y=~X3, name = 'trace 2',mode = 'lines+markers')
library(rjson)
library(plotly)
library(leaflet)
data <- fromJSON(sprintf("[%s]", paste(readLines("data.json"),collapse=",")))
a=data.frame( data)
type=as.character(a[1,4])
for(i in 2:5954){type=rbind(type,as.character(a[1,4*i]))}
lon=a[1,1]
for(i in 1:5953){lon=rbind(lon,a[1,4*i+1])}
lat=a[1,2]
for(i in 1:5953){lat=rbind(lat,a[1,4*i+2])}
ts=as.character(a[1,3])
for(i in 1:5953){ts=rbind(ts,as.character(a[1,4*i+3]))}
z=cbind(lon, lat, ts, type)
plot_ly(x=row.names(table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])),y=table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")))[,2], type='scatter')
aa=data.frame(table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))))
plot(z[,1:2])
df<-data.frame( cbind(lat,lon,ts,type))
colnames(df)<-c("lat","lng","ts","type")
tb=data.frame(table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4]))
colnames(tb)<-C("time","type","cnt")
plot_ly(tb,x=tb$Var1,y=tb$Freq,color = tb$Var2)
plot_ly(tb,x=tb$Var1,y=tb$Freq,color = tb$Var2)
c4<-lat[lat<48.233]#c(48.234,48.230,48.228)
c5<-lon[lon>16.363]#c(16.360,16.366,16.365)
c3<-c("Zlotoryja, Grunwaldzka 21")
greenLeafIcon <- makeIcon(
iconUrl = "http://leafletjs.com/examples/custom-icons/leaf-green.png",
iconWidth = 38, iconHeight = 95,
iconAnchorX = 22, iconAnchorY = 94,
shadowUrl = "http://leafletjs.com/examples/custom-icons/leaf-shadow.png",
shadowWidth = 50, shadowHeight = 64,
shadowAnchorX = 4, shadowAnchorY = 62
)
cff1<-data.frame(c4,c5)
colnames(cff1)<-c("lat","lng")
leaflet(cff1) %>% addTiles() %>%
addMarkers(lng=cff1$lng, lat=cff1$lat, clusterOptions = markerClusterOptions(maxClusterRadius=2)
) %>% addMarkers(lng=16.366791, lat=48.228759, icon = greenLeafIcon)
plot_ly(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"],color = "red")#%>%
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "black")#%>%
add_trace(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"]-tb$Freq[tb$Var2=="OUT"],typy="scatter")
plot_ly(tb,x=tb$Var1[tb$Var2=="OUT"],y=tb$Freq[tb$Var2=="OUT"],color = "black")%>%
add_trace(tb,x=tb$Var1[tb$Var2=="IN"],y=tb$Freq[tb$Var2=="IN"]-tb$Freq[tb$Var2=="OUT"],typy="scatter")
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
colnames(tb2)<-C("time","IN","OUT")
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2))
tb2<-transform(tb2, X2 = as.numeric(X2))
tb2<-transform(tb2, X1 = as.POSIXct(X1))
tb2<-transform(tb2, X3 = as.numeric(X3))
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'lines')%>%
add_trace(y=~X3, name = 'trace 2',mode = 'lines+markers')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'lines')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'bar')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'box')
plot_ly(tb2, x=~X1,y=~X2, name = 'trace 0',mode = 'hist')
plot_ly(tb2, x=~X1, y=~X2, name = 'trace 0',mode = 'hist')
plot_ly(tb2, x=~X1, y=~X2, name = 'trace 0',trace = 'hist')
plot_ly(tb2, x=~X1, y=~X2, name = 'trace 0',trace = 'histogram')
plot_ly(tb2, x=~X1, y=~X2, name = 'trace 0',type = 'histogram')
plot_ly(tb2, x=~X1, y=~X2, name = 'trace 0',type = 'bar')
plot_ly(tb2, x=~X1, y=~X2, name = 'trace 0',type = 'bar')%>%
add_trace(y=~X3, name = 'trace 2',type = 'bar')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'bar')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'line')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'area', mode='line')
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
library(rjson)
library(plotly)
library(leaflet)
data <- fromJSON(sprintf("[%s]", paste(readLines("data.json"),collapse=",")))
a=data.frame( data)
type=as.character(a[1,4])
for(i in 2:5954){type=rbind(type,as.character(a[1,4*i]))}
lon=a[1,1]
for(i in 1:5953){lon=rbind(lon,a[1,4*i+1])}
lat=a[1,2]
for(i in 1:5953){lat=rbind(lat,a[1,4*i+2])}
ts=as.character(a[1,3])
for(i in 1:5953){ts=rbind(ts,as.character(a[1,4*i+3]))}
z=cbind(lon, lat, ts, type)
z3=z[z[,1]>=16.366,]
z4=z[z[,1]>16.362&z[,1]<16.366&z[,2]>48.228,]
z5=rbind(z3,z4)
zo=z
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
colnames(tb2)<-C("time","IN","OUT")
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2))
tb2<-transform(tb2, X2 = as.numeric(X2))
tb2<-transform(tb2, X1 = as.POSIXct(X1))
tb2<-transform(tb2, X3 = as.numeric(X3))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
View(z)
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"]))=="2017-02-06 06",]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))=="2017-02-06 06",]
View(z6th)
as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))=="2017-02-06 06:00:00 CET",]
View(z6th)
?or
??or
??&
?&
?&&
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))=="2017-02-06 07:00:00 CET"|"2017-02-06 08:00:00 CET"|"2017-02-06 09:00:00 CET",]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))in("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET"),]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))in("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET"),]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))==c("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET"),]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))in(c("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET")),]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))%in%(c("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET")),]
View(z6th)
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))%in%("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET"),]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))==c("2017-02-06 07:00:00 CET","2017-02-06 08:00:00 CET","2017-02-06 09:00:00 CET"), ]
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))<"2017-02-06 09:00:00 CET", ]
View(z6th)
z6th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))<"2017-02-06 10:00:00 CET"&as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))>"2017-02-06 05:00:00 CET", ]
View(z6th)
z7th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))<"2017-02-07 10:00:00 CET"&as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))>"2017-02-07 05:00:00 CET", ]
z8th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))<"2017-02-08 10:00:00 CET"&as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))>"2017-02-08 05:00:00 CET", ]
z9th=z[as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))<"2017-02-09 10:00:00 CET"&as.POSIXct(strptime(z[,3],"%Y-%m-%d %H"))>"2017-02-09 05:00:00 CET", ]
z=z6th
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
colnames(tb2)<-C("time","IN","OUT")
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2))
tb2<-transform(tb2, X2 = as.numeric(X2))
tb2<-transform(tb2, X1 = as.POSIXct(X1))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb1
tb2
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')
%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')
plot_ly(tb2, x=~X1, y=~X3, name = 'IN',type = 'bar')
tb2
plot_ly( x=~X1, y=~X3, name = 'IN',type = 'bar')
plot_ly( x=tb2$X1, y=tb2$X3, name = 'IN',type = 'bar')
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
#add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb2$X3
tb2<-transform(tb2, X3 = as.numeric(X3))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
#add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb2$X3
tb2
z6th
z
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
tb1
plot_ly(tb1, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
#add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2))
tb2
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb2<-transform(tb2, X2 = as.numeric(X2))
tb2<-transform(tb2, X3 = as.numeric(X3))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb1
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2))
as.numeric(X2)
as.numeric(tb2$X2)
as.integer(tb2$X2)
tb2$X2
as.factor( tb2$X2)
tb2<-transform(tb2, X2 = as.factor(X2))
tb2<-transform(tb2, X3 = as.factor(X3))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X2-X3, name = 'Diff',type = 'scatter', mode='line')
tb2=data.frame(cbind(row.names(tb1),tb1$X1,tb1$X2,tb1$X1-tb1$X2))
tb2
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X4, name = 'Diff',type = 'scatter', mode='line')
tb2<-transform(tb2, X2 = as.factor(X2))
tb2<-transform(tb2, X3 = as.factor(X3))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X4, name = 'Diff',type = 'scatter', mode='line')
as.factor(tb2$X4)
tb2<-transform(tb2, X4 = as.factor(X4))
plot_ly(tb2, x=~X1, y=~X2, name = 'IN',type = 'bar')%>%
add_trace(y=~X3, name = 'OUT',type = 'bar')%>%
add_trace(y=~X4, name = 'Diff',type = 'scatter', mode='line')
as.Date.numeric(tb2$X4)
as.integer(tb2$X4)
tb2$X4
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
?plotly
z=z6th
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H %M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H")),z[,4])[,2]))
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
tb1
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H %M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H %M")),z[,4])[,2]))
tb1
table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H %M")),z[,4])
table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M"))
)
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
tb1
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
z=z7th
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
z=z8th
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
z=z9th
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
z=z6th
tb1=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
z=z9th
tb3=data.frame( cbind( table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,1],table(as.POSIXct(strptime(z[,3],"%Y-%m-%d %H:%M")),z[,4])[,2]))
par(mfrow=c(1,2))
plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
plot_ly(tb3, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p1=plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2=plot_ly(tb3, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
subplot(p1,p2)
p1=plot_ly(tb1, x=~row.names(tb1), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2=plot_ly(tb3, x=~row.names(tb3), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
subplot(p1,p2)
left(row.names(tb1),10)
left(row.names(tb1),n=10)
substr(row.names(tb1),10)
substr(row.names(tb1),0,10)
substr(row.names(tb1),0,14)
substr(row.names(tb1),0,15)
substr(row.names(z[,3]),0,15)
substr(z[,3],0,15)
tb3=data.frame( cbind( table(substr(z[,3],0,15),z[,4])[,1],table(substr(z[,3],0,15),z[,4])[,2]))
p2=plot_ly(tb3, x=~row.names(tb3), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2
p2=plot_ly(tb3, x=~substring(row.names(tb3),10,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2
p2=plot_ly(tb3, x=~substring(row.names(tb3),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2
tb1
table(substr(z[,3],0,15),z[,4])
p1=plot_ly(tb1, x=~substring(row.names(tb1),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2=plot_ly(tb2, x=~substring(row.names(tb2),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p3=plot_ly(tb3, x=~substring(row.names(tb3),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p4=plot_ly(tb4, x=~substring(row.names(tb4),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
z=z6th
tb1=data.frame( cbind( table(substr(z[,3],0,15),z[,4])[,1],table(substr(z[,3],0,15),z[,4])[,2]))
z=z7th
tb2=data.frame( cbind( table(substr(z[,3],0,15),z[,4])[,1],table(substr(z[,3],0,15),z[,4])[,2]))
z=z8th
tb3=data.frame( cbind( table(substr(z[,3],0,15),z[,4])[,1],table(substr(z[,3],0,15),z[,4])[,2]))
z=z9th
tb4=data.frame( cbind( table(substr(z[,3],0,15),z[,4])[,1],table(substr(z[,3],0,15),z[,4])[,2]))
p1=plot_ly(tb1, x=~substring(row.names(tb1),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p2=plot_ly(tb2, x=~substring(row.names(tb2),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p3=plot_ly(tb3, x=~substring(row.names(tb3),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
p4=plot_ly(tb4, x=~substring(row.names(tb4),12,15), y=~X1, name = 'IN',type = 'bar')%>%
add_trace(y=~X2, name = 'OUT',type = 'bar')%>%
add_trace(y=~X1-X2, name = 'Diff',type = 'scatter', mode='line')
subplot(p1,p2,p3,p4,nrows=2)
p1=plot_ly(x=~substring(row.names(tb1),12,15), y=tb1$X1-tb1$X2, name = 'Diff1',type = 'scatter', mode='line')%>%
add_trace(y=tb2$X1-tb2$X2, name = 'Diff2',type = 'scatter', mode='line')%>%
add_trace(y=tb3$X1-tb3$X2, name = 'Diff3',type = 'scatter', mode='line')%>%
add_trace(y=tb4$X1-tb4$X2, name = 'Diff4',type = 'scatter', mode='line')
p1
shiny::runApp('Dedalbud')
runApp('Dedalbud')
runApp('monitoring')
runApp('zzzz')
runApp('side')
runApp('tablee')
runApp('monitoring')
runApp('monitoring')
runApp('monitoring')
runApp('monitoring')
setwd("C:/Users/Łukasz Janiszewski/Rpublic")
prod=read.csv("produkty.csv",header=TRUE, sep=";")
prod=read.csv("edzisia/produkty.csv",header=TRUE, sep=";")
opt=read.csv("edzisia/dieta.csv",header=TRUE, sep=";")
library(lpSolveAPI)
mylp1<-make.lp(2,2)
